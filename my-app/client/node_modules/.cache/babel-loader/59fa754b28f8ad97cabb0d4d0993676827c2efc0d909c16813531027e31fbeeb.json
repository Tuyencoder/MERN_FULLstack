{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\Desktop\\\\Project\\\\MERN_FULLstack\\\\my-app\\\\client\\\\src\\\\components\\\\forms\\\\ImageUpload.js\";\nimport Resizer from 'react-image-file-resizer';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ImageUpload({\n  ad,\n  setAd\n}) {\n  const handleUpload = e => {\n    var _files;\n    let files = e.target.files;\n    files = [...files];\n    if ((_files = files) !== null && _files !== void 0 && _files.length) {\n      setAd({\n        ...ad,\n        uploading: true\n      });\n      files.map(f => {\n        // upload\n        new Promise(resolve => {\n          Resizer.imageFileResizer(f, 1080, 720, \"JPEG\", 100, 0, async uri => {\n            try {\n              const {\n                data\n              } = await axios.post(\"/upload-image\", {\n                image: uri\n              });\n              setAd(prev => ({\n                ...prev,\n                photos: [data, ...prev.photos],\n                uploading: false\n              }));\n            } catch (err) {\n              console.log(\"photo upload err => \", err);\n              setAd({\n                ...ad,\n                uploading: false\n              });\n            }\n          }, \"base64\");\n        });\n      });\n    } else {\n      setAd({\n        ...ad,\n        uploading: false\n      });\n    }\n  };\n  const handleDelete = async photo => {\n    setAd({\n      ...ad,\n      uploading: true\n    });\n    try {\n      console.log(\"send API request to remove file\");\n    } catch (err) {\n      console.log(err);\n      setAd({\n        ...ad,\n        removing: false\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"btn btn-secondary\",\n        children: [ad.uploading ? \"Uploading...\" : ad.removing ? \"Removing...\" : \"Upload photos\", /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"/upload/photo\",\n          enctype: \"multipart/form-data\",\n          method: \"POST\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"myImage\",\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Upload Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_c = ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["Resizer","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageUpload","ad","setAd","handleUpload","e","_files","files","target","length","uploading","map","f","Promise","resolve","imageFileResizer","uri","data","post","image","prev","photos","err","console","log","handleDelete","photo","removing","children","className","action","enctype","method","type","name","accept","fileName","_jsxFileName","lineNumber","columnNumber","value","_c","$RefreshReg$"],"sources":["C:/Users/PC/OneDrive/Desktop/Project/MERN_FULLstack/my-app/client/src/components/forms/ImageUpload.js"],"sourcesContent":["import Resizer from 'react-image-file-resizer'\r\nimport axios from \"axios\";\r\nexport default function ImageUpload({ ad, setAd }) {\r\n    const handleUpload = (e) => {\r\n        let files = e.target.files;\r\n        files = [...files];\r\n        if (files?.length) {\r\n          setAd({ ...ad, uploading: true });\r\n          files.map((f) => {\r\n            // upload\r\n            new Promise((resolve) => {\r\n              Resizer.imageFileResizer(\r\n                f,\r\n                1080,\r\n                720,\r\n                \"JPEG\",\r\n                100,\r\n                0,\r\n                async (uri) => {\r\n                  try {\r\n                    const { data } = await axios.post(\"/upload-image\", {\r\n                      image: uri,\r\n                    });\r\n                    setAd((prev) => ({\r\n                      ...prev,\r\n                      photos: [data, ...prev.photos],\r\n                      uploading: false,\r\n                    }));\r\n                  } catch (err) {\r\n                    console.log(\"photo upload err => \", err);\r\n                    setAd({ ...ad, uploading: false });\r\n                  }\r\n                },\r\n                \"base64\"\r\n              );\r\n            });\r\n          });\r\n        } else {\r\n          setAd({ ...ad, uploading: false });\r\n        }\r\n      };\r\n  \r\n    const handleDelete = async (photo) => {\r\n      setAd({ ...ad, uploading: true });\r\n      try {\r\n        console.log(\"send API request to remove file\");\r\n      } catch (err) {\r\n        console.log(err);\r\n        setAd({ ...ad, removing: false });\r\n      }\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <div className=\"d-flex mt-4\">\r\n          <label className=\"btn btn-secondary\">\r\n            {ad.uploading\r\n              ? \"Uploading...\"\r\n              : ad.removing\r\n              ? \"Removing...\"\r\n              : \"Upload photos\"}\r\n            <form action=\"/upload/photo\" enctype=\"multipart/form-data\" method=\"POST\"> \r\n  <input type=\"file\" name=\"myImage\" accept=\"image/*\" />\r\n  <input type=\"submit\" value=\"Upload Photo\"/>\r\n</form>\r\n          </label>\r\n        </div>\r\n      </>\r\n    );\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}