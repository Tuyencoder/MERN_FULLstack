{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\Desktop\\\\Project\\\\MERN_FULLstack\\\\my-app\\\\client\\\\src\\\\components\\\\routes\\\\AdminRoute.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Outlet } from \"react-router-dom\";\nimport { useAuth } from \"../../context/auth\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPrivateRoute = () => {\n  _s();\n  const [auth, setAuth] = useAuth();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [ok, setOk] = useState(false);\n  useEffect(() => {\n    if (auth !== null && auth !== void 0 && auth.token) {\n      getCurrentUser();\n    }\n  }, [auth === null || auth === void 0 ? void 0 : auth.token]);\n  const getCurrentUser = async () => {\n    try {\n      const {\n        data\n      } = await axios.get(`/current-user`, {\n        headers: {\n          Authorization: auth === null || auth === void 0 ? void 0 : auth.token\n        }\n      });\n      console.log('data ở đây', data);\n      // Kiểm tra thông tin người dùng có vai trò admin hay không\n      if (data.role[0] === 'admin') {\n        setIsAdmin(true);\n      }\n      setOk(true);\n    } catch (err) {\n      setOk(false);\n    }\n  };\n  return isAdmin ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 20\n  }, this) : \"Bạn không có quyền truy cập\";\n};\n_s(AdminPrivateRoute, \"/H2GIlBHPcU22SVTWYNm5uAOLXc=\", false, function () {\n  return [useAuth];\n});\n_c = AdminPrivateRoute;\nexport default AdminPrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"AdminPrivateRoute\");","map":{"version":3,"names":["useEffect","useState","Outlet","useAuth","axios","jsxDEV","_jsxDEV","AdminPrivateRoute","_s","auth","setAuth","isAdmin","setIsAdmin","ok","setOk","token","getCurrentUser","data","get","headers","Authorization","console","log","role","err","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/PC/OneDrive/Desktop/Project/MERN_FULLstack/my-app/client/src/components/routes/AdminRoute.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Outlet } from \"react-router-dom\";\r\nimport { useAuth } from \"../../context/auth\";\r\nimport axios from \"axios\";\r\n const AdminPrivateRoute = () => {\r\n  const [auth, setAuth] = useAuth();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [ok, setOk] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (auth?.token) {\r\n      getCurrentUser();\r\n    }\r\n  }, [auth?.token]);\r\n\r\n  const getCurrentUser = async () => {\r\n    try {\r\n      const { data } = await axios.get(`/current-user`, {\r\n        headers: {\r\n          Authorization: auth?.token,\r\n        },\r\n      });\r\n      console.log('data ở đây',data);\r\n      // Kiểm tra thông tin người dùng có vai trò admin hay không\r\n      if (data.role[0] === 'admin') {\r\n        setIsAdmin(true);\r\n      }\r\n\r\n      setOk(true);\r\n    } catch (err) {\r\n      setOk(false);\r\n    }\r\n  };\r\n\r\n  return isAdmin ? <Outlet /> : \"Bạn không có quyền truy cập\";\r\n};\r\n\r\nexport default AdminPrivateRoute;"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACzB,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,OAAO,CAAC,CAAC;EACjC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACY,EAAE,EAAEC,KAAK,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAEnCD,SAAS,CAAC,MAAM;IACd,IAAIS,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEM,KAAK,EAAE;MACfC,cAAc,CAAC,CAAC;IAClB;EACF,CAAC,EAAE,CAACP,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,KAAK,CAAC,CAAC;EAEjB,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAE,eAAc,EAAE;QAChDC,OAAO,EAAE;UACPC,aAAa,EAAEX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM;QACvB;MACF,CAAC,CAAC;MACFM,OAAO,CAACC,GAAG,CAAC,YAAY,EAACL,IAAI,CAAC;MAC9B;MACA,IAAIA,IAAI,CAACM,IAAI,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;QAC5BX,UAAU,CAAC,IAAI,CAAC;MAClB;MAEAE,KAAK,CAAC,IAAI,CAAC;IACb,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZV,KAAK,CAAC,KAAK,CAAC;IACd;EACF,CAAC;EAED,OAAOH,OAAO,gBAAGL,OAAA,CAACJ,MAAM;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,GAAG,6BAA6B;AAC7D,CAAC;AAACpB,EAAA,CA/BKD,iBAAiB;EAAA,QACEJ,OAAO;AAAA;AAAA0B,EAAA,GAD1BtB,iBAAiB;AAiCxB,eAAeA,iBAAiB;AAAC,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}